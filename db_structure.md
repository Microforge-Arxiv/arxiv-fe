-- Organizations Table
CREATE TABLE organizations (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
created_at TIMESTAMPTZ DEFAULT NOW(),
name VARCHAR NOT NULL,
url VARCHAR,
requirements VARCHAR
);

-- Profiles Table
CREATE TABLE profiles (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
created_at TIMESTAMPTZ DEFAULT NOW(),
userid UUID REFERENCES auth.users(id) ON DELETE CASCADE,
orgid BIGINT REFERENCES organizations(id) ON DELETE SET NULL
);

-- Searches Table
CREATE TABLE searches (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
created_at TIMESTAMPTZ DEFAULT NOW(),
profileid BIGINT REFERENCES profiles(id) ON DELETE CASCADE,
query VARCHAR NOT NULL
);
